<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Virtual Herbal Garden</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    html, body {
      height: 100%;
      font-family: 'Poppins', sans-serif;
      background: url('https://t4.ftcdn.net/jpg/03/14/27/53/360_F_314275333_Yj6JJRHpakPJskizPpMbQI9637eJSNjr.jpg') no-repeat center center fixed;
      background-size: cover;
      position: relative;
    }
    .spotlight {
      position: fixed;
      width: 100%;
      height: 100%;
      pointer-events: none;
      background: radial-gradient(circle 150px at var(--x, 50%) var(--y, 50%), transparent 0%, rgba(0, 0, 0, 0.85) 100%);
      transition: background 0.1s ease;
      z-index: 0;
    }
    .header {
      text-align: center;
      padding: 80px 0 20px;
      color: white;
      text-shadow: 2px 2px 5px #000;
      font-size: 2.5rem;
      position: relative;
      z-index: 1;
    }
    .nav-container {
      display: flex;
      justify-content: center;
      margin-top: 30px;
      position: relative;
      z-index: 1;
    }
    .nav-list {
      list-style: none;
      display: flex;
      gap: 50px;
      flex-wrap: wrap;
      justify-content: center;
    }
    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-decoration: none;
      color: white;
      transition: transform 0.3s ease;
    }
    .nav-item:hover {
      transform: scale(1.1);
    }
    .icon-glass {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      overflow: hidden;
      backdrop-filter: blur(12px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 12px;
    }
    .icon-glass img {
      width: 80px;
      height: 80px;
      object-fit: cover;
      border-radius: 50%;
    }
    .label {
      color: white;
      font-size: 1.1rem;
      text-shadow: 1px 1px 2px black;
    }
    .assistance {
      position: fixed;
      bottom: 20px;
      right: 40px;
      width: 80px;
      height: 80px;
      border-radius: 50%;
      overflow: hidden;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      transition: transform 0.3s ease;
      z-index: 2;
    }
    .assistance img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .assistance:hover {
      transform: scale(1.1);
    }
    .tooltip {
      visibility: hidden;
      width: 140px;
      background-color: rgba(0, 0, 0, 0.7);
      color: #fff;
      text-align: center;
      border-radius: 6px;
      padding: 5px;
      position: absolute;
      bottom: 70px;
      right: 50%;
      transform: translateX(50%);
      opacity: 0;
      transition: opacity 0.3s;
    }
    .assistance:hover .tooltip {
      visibility: visible;
      opacity: 1;
    }
    @media (max-width: 600px) {
      .nav-list {
        flex-direction: column;
        gap: 20px;
      }
    }
  </style>
</head>
<body>

  <div class="spotlight"></div>
  <div class="header">Virtual Herbal Garden</div>

  <div class="nav-container">
    <ul class="nav-list">
      <li>
      <!--  <a href="#login-signup" class="nav-item">
          <div class="icon-glass">
            <img src="https://cdn-icons-png.flaticon.com/512/4122/4122901.png" alt="Login/Signup Icon">
          </div>
          <div class="label">Login/Signup</div>
        </a>-->
      </li>
      <li>
        <a href="/home" class="nav-item">
          <div class="icon-glass">
            <img src="https://static.vecteezy.com/system/resources/thumbnails/029/130/032/small/copy-space-of-home-and-life-concept-small-model-home-on-green-grass-with-sunlight-abstract-background-ai-generated-photo.jpg" alt="Home Icon">
          </div>
          <div class="label">Home</div>
        </a>
      </li>
      <li>
        <a href="/explore_test1" class="nav-item">
          <div class="icon-glass">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQDzD3KvjWikMGd8jSON33R2JfUppEpz3rNug&s" alt="Explore Icon">
          </div>
          <div class="label">Explore</div>
        </a>
      </li>
      <li>
        <a href="/cultivation_guide" class="nav-item">
          <div class="icon-glass">
            <img src="https://chap-solutions.co.uk/wp-content/uploads/2020/10/shutterstock_1794582268-scaled.jpg" alt="Guide Icon">
          </div>
          <div class="label">Cultivation Guide</div>
        </a>
      </li>
      <li>
        <a href="/community" class="nav-item">
          <div class="icon-glass">
            <img src="https://static.wixstatic.com/media/f02629_3fd15850806c498e8864f365f94bfb24~mv2.jpg/v1/fill/w_1000,h_662,al_c,q_85,usm_0.66_1.00_0.01/f02629_3fd15850806c498e8864f365f94bfb24~mv2.jpg" alt="Community Icon">
          </div>
          <div class="label">User Community</div>
        </a>
      </li>
      <li>
       <!-- <a href="#about" class="nav-item">
          <div class="icon-glass">
            <img src="https://png.pngtree.com/png-vector/20220306/ourmid/pngtree-green-informations-icon-information-informations-vector-vector-png-image_16331144.jpg" alt="About Icon">
          </div>
          <div class="label">About</div>
        </a>-->
      </li>
    </ul>
  </div>

  <div class="assistance">
    <img src="https://t3.ftcdn.net/jpg/04/45/50/22/360_F_445502211_QDtglgLRyUHK0BKy57y7v0InwGYrSPMy.jpg" alt="Assistant">
    <!--<span class="tooltip">How can I help you?</span>-->
  </div>
 <!-- CHATBOX -->
<div id="chatbox" style="display:none; position:fixed; bottom:110px; right:40px; width:320px; background:white; border-radius:10px; box-shadow:0 0 10px rgba(0,0,0,0.3); z-index:3; overflow:hidden; font-family:'Poppins', sans-serif;">
  <div style="background:#4CAF50; color:white; padding:10px; font-weight:bold; display:flex; justify-content:space-between; align-items:center;">
    <span>Herbal Assistant</span>
    <button onclick="clearChat()" style="background:none; border:none; color:white; font-size:14px; cursor:pointer;">Clear</button>
  </div>
  <div id="chat-messages" style="height:280px; overflow-y:auto; padding:10px; display:flex; flex-direction:column; gap:10px;"></div>
  <div style="display:flex; border-top:1px solid #ccc;">
    <input id="user-input" type="text" placeholder="Ask me..." style="flex:1; padding:10px; border:none; outline:none;">
    <button onclick="sendMessage()" style="background:#4CAF50; color:white; border:none; padding:10px 16px;">Send</button>
  </div>
</div>

  <script>
    const spotlight = document.querySelector('.spotlight');
    document.addEventListener('mousemove', (e) => {
      const x = e.clientX;
      const y = e.clientY;
      spotlight.style.setProperty('--x', `${x}px`);
      spotlight.style.setProperty('--y', `${y}px`);
    });
    // Toggle chat
  document.querySelector(".assistance").addEventListener("click", () => {
    const box = document.getElementById("chatbox");
    box.style.display = (box.style.display === "none") ? "block" : "none";
  });

  // Clear chat
  function clearChat() {
    document.getElementById("chat-messages").innerHTML = "";
  }

  // Send message
  async function sendMessage() {
    const input = document.getElementById("user-input");
    const chat = document.getElementById("chat-messages");
    const userText = input.value.trim();
    if (!userText) return;

    input.value = "";

    // Show user's message (right aligned)
    chat.innerHTML += `
      <div style="display:flex; justify-content:flex-end; align-items:flex-start;">
        <div style="max-width:70%; background:#DCF8C6; padding:10px; border-radius:12px 12px 0 12px; text-align:left;">
          ${userText}
        </div>
        <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" width="32" height="32" style="margin-left:8px; border-radius:50%;">
      </div>
    `;

    chat.scrollTop = chat.scrollHeight;

    // Show bot typing
    chat.innerHTML += `
      <div id="bot-thinking" style="display:flex; justify-content:flex-start; align-items:flex-start;">
        <img src="https://t3.ftcdn.net/jpg/04/45/50/22/360_F_445502211_QDtglgLRyUHK0BKy57y7v0InwGYrSPMy.jpg" width="32" height="32" style="margin-right:8px; border-radius:50%;">
        <div style="max-width:70%; background:#eee; padding:10px; border-radius:12px 12px 12px 0;">Bot is thinking...</div>
      </div>
    `;

    chat.scrollTop = chat.scrollHeight;

    // Send request to backend
    try {
      const response = await fetch("http://localhost:5000/chat", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ message: userText })
      });

      const data = await response.json();
      document.getElementById("bot-thinking").remove();

      // Show bot response (left aligned)
      chat.innerHTML += `
        <div style="display:flex; justify-content:flex-start; align-items:flex-start;">
          <img src="https://upload.wikimedia.org/wikipedia/commons/8/87/Sadhu_at_Pashupatinath_Temple.jpg?rand=${Math.random()}" width="32" height="32" style="margin-right:8px; border-radius:50%;">

          <div style="max-width:70%; background:#eee; padding:10px; border-radius:12px 12px 12px 0;">${data.reply}</div>
        </div>
      `;

      chat.scrollTop = chat.scrollHeight;
    } catch (error) {
      document.getElementById("bot-thinking").remove();
      chat.innerHTML += `<div style="color:red;"><strong>Bot:</strong> Could not connect to server.</div>`;
    }
  }
 

  </script>

</body>
</html>
